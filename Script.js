(()=>{let ce=t=>document.createElement(t),cd=i=>{let d=ce("div");if (i) d.id=i;return d;},ap=(p,c)=>p.appendChild(c),rc=c=>c.parentNode.removeChild(c),sa=(e,k,v)=>e.setAttribute(k,v),ra=(e,k)=>e.removeAttribute(k),ael=(e,t,f)=>e.addEventListener(t,f),sc=(e,c)=>{if (c) sa(e,"class",c);else ra(e,"class");return e;},head=document.head;let main=()=>{var current=0;let renderer=[canvasRenderer,svgRenderer];let resized=()=>{let r=d.getBoundingClientRect(),pr=window.devicePixelRatio;let w=r.width*pr,h=r.height*pr;let c=(coord.w!=w)||(coord.h!=h);if (c) {coord.w=w;coord.h=h;i.resized();}return c;};let schemeChanged=()=>{setTimeout(()=>{let r=renderer[current];if (r.redrawOnSchemeChanged) r.draw(coord);},300);};let rendererChange=n=>{while (d.firstChild) rc(d.firstChild);current=n;ap(d,renderer[n].artifact);coord.calc();};let draw=()=>renderer[current].draw(coord);let coord=coordInit(draw);status=status(schemeChanged);if (status.online) try{["../Library/ServiceWorker.js","ServiceWorker.js"].forEach(f=>navigator.serviceWorker.register(f).then(r=>r.update()));}catch(e){}ael(window,"resize",()=>{if (resized()) draw();setTimeout(()=>{if (resized()) draw();},100);});let d=cd("drawView");let i=input(coord);(()=>{let b=ap(document.body,cd("base"));ap(b,cd("statusbar"));ap(b,d);ap(b,i.input);var gotten=false;let m=menu(status,coord,()=>{if (gotten) rendererChange((current+1)%renderer.length);else gotten=true;return renderer[current].icon;});ap(b,m.view);ap(b,m.button);})();(()=>{resized();coord.x=coord.w/6,coord.y=coord.h/8,coord.a=coord.w/12,coord.oblique.v=0.3;rendererChange(0);})();};var canvasRenderer,svgRenderer,coordInit,input,menu,status;new Promise(r=>{var counter=0;let getResource=(n,s)=>{switch (n) {case "canvas":canvasRenderer=s;counter++;break;case "svg":svgRenderer=s;counter++;break;case "calculator":coordInit=s;counter++;break;case "input":input=s;counter++;break;case "menu":menu=s;counter++;break;case "status":status=s;counter++;break;}confirm();};let confirm=()=>{if (counter==6) {delete window.res;r();}};window.res=(n,s)=>getResource(n,s);}).then(main);})();