(()=>{let ce=t=>document.createElement(t),cd=i=>{let d=ce("div");if (i) d.id=i;return d;},ap=(p,c)=>p.appendChild(c),rc=c=>c.parentNode.removeChild(c),sa=(e,k,v)=>e.setAttribute(k,v),ra=(e,k)=>e.removeAttribute(k),ael=(e,t,f)=>e.addEventListener(t,f),sc=(e,c)=>{if (c) sa(e,"class",c);else ra(e,"class");return e;},valid=v=>v!=undefined,head=document.head;let main=()=>{var current=0;let renderer=[canvasRenderer];let resized=()=>{let r=d.getBoundingClientRect(),pr=window.devicePixelRatio;coord.w=r.width*pr;coord.h=r.height*pr;};let schemeChanged=()=>{setTimeout(()=>{let r=renderer[current];if (r.redrawOnSchemeChanged) r.draw(coord);},300);};let draw=()=>renderer[current].draw(coord);let coord=coordInit(draw);status=status(schemeChanged);if (status.online) try{["../Library/ServiceWorker.js","ServiceWorker.js"].forEach(f=>navigator.serviceWorker.register(f).then(r=>r.update()));}catch(e){}ael(window,"resize",()=>{resized();draw();});let d=cd("drawView");(()=>{let b=ap(document.body,cd("base"));ap(b,d);let i=input(coord);ap(b,i.input);i.resized();let m=menu(status,coord);ap(b,m.view);ap(b,m.button);})();(()=>{ap(d,renderer[current].artifact);resized();coord.x=coord.w/6,coord.y=coord.h/8,coord.a=coord.w/12;coord.calc();})();};var canvasRenderer,coordInit,input,menu,status;Promise.all([new Promise(r=>{var counter=0;let getResource=(n,s)=>{switch (n) {case "canvas":canvasRenderer=s;counter++;break;case "calculator":coordInit=s;counter++;break;case "input":input=s;counter++;break;case "menu":menu=s;counter++;break;case "status":status=s;counter++;break;}confirm();};let confirm=()=>{if (counter==5) {delete window.res;r();}};window.res=(n,s)=>getResource(n,s);}),new Promise(r=>ael(window,"load",r))]).then(main);})();